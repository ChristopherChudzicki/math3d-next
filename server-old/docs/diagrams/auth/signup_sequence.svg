<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="502px" preserveAspectRatio="none" style="width:559px;height:502px;background:#FFFFFF;" version="1.1" viewBox="0 0 559 502" width="559px" zoomAndPan="magnify"><defs><filter height="300%" id="f16lr5yg90f19c" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f16lr5yg90f19c)" height="238.0391" style="stroke:#000000;stroke-width:2.0;" width="439.5" x="10" y="204.041"/><rect fill="#FFFFFF" height="44.2656" style="stroke:none;stroke-width:1.0;" width="439.5" x="10" y="309.2832"/><rect fill="#FFFFFF" height="44.2656" style="stroke:none;stroke-width:1.0;" width="439.5" x="10" y="353.5488"/><rect fill="#FFFFFF" height="44.2656" style="stroke:none;stroke-width:1.0;" width="439.5" x="10" y="397.8145"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="40.4883" y2="459.0801"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="259.5" x2="259.5" y1="40.4883" y2="459.0801"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="398.5" x2="398.5" y1="40.4883" y2="459.0801"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="499.5" x2="499.5" y1="40.4883" y2="459.0801"/><rect fill="#FEFECE" filter="url(#f16lr5yg90f19c)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="54" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="27" y="25.5352">Client</text><rect fill="#FEFECE" filter="url(#f16lr5yg90f19c)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="54" x="20" y="458.0801"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="27" y="478.6152">Client</text><rect fill="#FEFECE" filter="url(#f16lr5yg90f19c)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="57" x="229.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="236.5" y="25.5352">Server</text><rect fill="#FEFECE" filter="url(#f16lr5yg90f19c)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="57" x="229.5" y="458.0801"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="236.5" y="478.6152">Server</text><rect fill="#FEFECE" filter="url(#f16lr5yg90f19c)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="77" x="358.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="365.5" y="25.5352">Database</text><rect fill="#FEFECE" filter="url(#f16lr5yg90f19c)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="77" x="358.5" y="458.0801"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="365.5" y="478.6152">Database</text><rect fill="#FEFECE" filter="url(#f16lr5yg90f19c)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="96" x="449.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="456.5" y="25.5352">User's Email</text><rect fill="#FEFECE" filter="url(#f16lr5yg90f19c)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="96" x="449.5" y="458.0801"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="456.5" y="478.6152">User's Email</text><polygon fill="#A80036" points="248,67.7988,258,71.7988,248,75.7988,252,71.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="254" y1="71.7988" y2="71.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="56" y="67.0566">GET /user/signup</text><polygon fill="#A80036" points="487.5,97.1094,497.5,101.1094,487.5,105.1094,491.5,101.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="260" x2="493.5" y1="101.1094" y2="101.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="267" y="96.3672">SignupToken</text><polygon fill="#A80036" points="487.5,126.4199,497.5,130.4199,487.5,134.4199,491.5,130.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="493.5" y1="130.4199" y2="130.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="56" y="125.6777">Check Email</text><polygon fill="#A80036" points="60,155.7305,50,159.7305,60,163.7305,56,159.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="498.5" y1="159.7305" y2="159.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="66" y="154.9883">SignupToken</text><polygon fill="#A80036" points="248,185.041,258,189.041,248,193.041,252,189.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="254" y1="189.041" y2="189.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="56" y="184.2988">POST /user/create</text><path d="M10,204.041 L72,204.041 L72,211.041 L62,221.041 L10,221.041 L10,204.041 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="238.0391" style="stroke:#000000;stroke-width:2.0;" width="439.5" x="10" y="204.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="217.6094">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="113" x="87" y="216.6758">[valid SignupToken]</text><polygon fill="#A80036" points="387,238.6621,397,242.6621,387,246.6621,391,242.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="260" x2="393" y1="242.6621" y2="242.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="267" y="237.9199">Insert User Record</text><polygon fill="#A80036" points="271,267.9727,261,271.9727,271,275.9727,267,271.9727" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="265" x2="398" y1="271.9727" y2="271.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="277" y="267.2305">userId</text><polygon fill="#A80036" points="60,297.2832,50,301.2832,60,305.2832,56,301.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="259" y1="301.2832" y2="301.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="66" y="296.541">AccessToken + RefreshToken</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="449.5" y1="310.2832" y2="310.2832"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="15" y="320.918">[invalid signature SignupToken]</text><polygon fill="#A80036" points="60,341.5488,50,345.5488,60,349.5488,56,345.5488" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="259" y1="345.5488" y2="345.5488"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="66" y="340.8066">403 Forbidden</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="449.5" y1="354.5488" y2="354.5488"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="15" y="365.1836">[expired SignupToken]</text><polygon fill="#A80036" points="60,385.8145,50,389.8145,60,393.8145,56,389.8145" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="259" y1="389.8145" y2="389.8145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="66" y="385.0723">401 Unauthorized (expired)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="449.5" y1="398.8145" y2="398.8145"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99" x="15" y="409.4492">[no SignupToken]</text><polygon fill="#A80036" points="60,430.0801,50,434.0801,60,438.0801,56,434.0801" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="259" y1="434.0801" y2="434.0801"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="66" y="429.3379">401 Unauthorized</text><!--MD5=[d5cb810f265bc5dc8bfa5ba3bfb7010f]
@startuml signup_sequence
   participant Client as C
   participant Server as S
   participant Database as Db
   participant "User's Email" as E

   C -> S: GET /user/signup
   S -> E: SignupToken
   C -> E: Check Email
   E - -> C: SignupToken
   C -> S: POST /user/create 

   alt valid SignupToken

      S -> Db: Insert User Record
      Db - -> S: userId

      S - -> C: AccessToken + RefreshToken

   else invalid signature SignupToken

      S - -> C: 403 Forbidden

   else expired SignupToken

      S - -> C: 401 Unauthorized (expired)

   else no SignupToken

      S - -> C: 401 Unauthorized

   end
@enduml

PlantUML version 1.2021.16(Wed Dec 08 12:25:22 EST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>